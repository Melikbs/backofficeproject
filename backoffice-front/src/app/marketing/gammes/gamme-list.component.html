<div class="container py-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold mb-0 text-dark">
      <i class="bi bi-grid-fill me-2"></i> Categories Management
    </h2>
    <button class="btn btn-danger px-4 py-2 shadow-sm" (click)="openCreateModal()">
      <i class="bi bi-plus-circle me-2"></i> Add Category
    </button>
  </div>

  <div class="card border-0 shadow rounded">
    <div class="card-body table-responsive">
      <table class="table align-middle table-hover">
        <thead style="background-color: #f8f9fa" class="text-secondary">
          <tr>
            <th>Code</th>
            <th>Label</th>
            <th>Status</th>
            <th class="text-center">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let gamme of gammes; trackBy: trackByCodeGamme">
            <td class="fw-semibold text-dark">{{ gamme.codeGamme }}</td>
            <td>{{ gamme.libelle }}</td>
            <td>
              <span class="badge" [ngClass]="gamme.flag ? 'bg-success' : 'bg-secondary'">
                {{ gamme.flag ? 'Active' : 'Inactive' }}
              </span>
            </td>
            <td class="text-center table-actions">
              <button class="btn btn-warning btn-sm me-2" (click)="openEditModal(gamme)">
                <i class="bi bi-pencil me-1"></i> Edit
              </button>
              <button class="btn btn-secondary btn-sm me-2" (click)="onToggleFlag(gamme.codeGamme)">
                <i class="bi" [ngClass]="gamme.flag ? 'bi-toggle-on' : 'bi-toggle-off'"></i> Toggle
              </button>
              <button class="btn btn-danger btn-sm" (click)="confirmDelete(gamme.codeGamme)">
                <i class="bi bi-trash me-1"></i> Delete
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="gammeModal" tabindex="-1" aria-labelledby="gammeModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content border-0 shadow rounded">
      <form (ngSubmit)="onSubmit()">
        <div class="modal-header text-black" style="background-color: white">
          <h5 class="modal-title" id="gammeModalLabel">
            {{ isEdit ? 'Edit Category' : 'Add Category' }}
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body">
          <div class="mb-3">
            <label for="codeGamme" class="form-label text-dark">Code</label>
            <input
              type="text"
              id="codeGamme"
              [(ngModel)]="selectedGamme.codeGamme"
              name="codeGamme"
              class="form-control"
              [readonly]="isEdit"
              placeholder="Enter code"
              required
            >
          </div>

          <div class="mb-3">
            <label for="libelle" class="form-label text-dark">Label</label>
            <input
              type="text"
              id="libelle"
              [(ngModel)]="selectedGamme.libelle"
              name="libelle"
              class="form-control"
              placeholder="Enter label"
              required
            >
          </div>

          <div class="form-check form-switch">
            <input
              type="checkbox"
              id="flag"
              [(ngModel)]="selectedGamme.flag"
              name="flag"
              class="form-check-input"
            >
            <label for="flag" class="form-check-label">Active</label>
          </div>
        </div>

        <div class="modal-footer">
          <button type="submit" class="btn btn-danger px-4">
            {{ isEdit ? 'Update' : 'Create' }}
          </button>
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
