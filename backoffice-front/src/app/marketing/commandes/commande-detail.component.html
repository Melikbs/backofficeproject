<div class="commande-detail-container p-4 rounded shadow bg-white" *ngIf="commande">
    <h3 class="mb-4 text-dark fw-bold">
      <i class="fas fa-file-invoice me-2 text-danger"></i> Order #{{ commande.codeCommande }}
    </h3>
    <!-- 🔘 Actions tout en haut -->
  <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2">
    <div>
      <span class="status-pill"
            [ngClass]="{
              'validated': commande.status === 'VALIDATED',
              'refused': commande.status === 'REFUSED',
              'pending': commande.status === 'PENDING'
            }">
        {{ commande.status }}
      </span>
    </div>
    <div class="d-flex gap-2">
      <button class="btn btn-outline-dark" (click)="back()">Back</button>
      <button class="btn btn-success" (click)="validate()" [disabled]="commande.status === 'VALIDATED'">Validate</button>
      <button class="btn btn-danger" (click)="refuse()" [disabled]="commande.status === 'REFUSED'">Refuse</button>
    </div>
    <div>
      <button class="btn btn-outline-secondary" (click)="generatePDF()">
        <i class="fas fa-file-pdf me-1"></i> Export Facture
      </button>
    </div>
  </div>
    <!-- 🧍 Client Section -->
    <div class="section-card mb-4">
      <h5 class="fw-semibold mb-3"><i class="fas fa-user me-2 text-secondary"></i>Client Info</h5>
      <div class="row">
        <div class="col-md-6"><strong>Name:</strong> {{ commande.client.nom }} {{ commande.client.prenom }}</div>
        <div class="col-md-6"><strong>Email:</strong> {{ commande.client.email }}</div>
        <div class="col-md-6"><strong>Phone:</strong> {{ commande.client.tel }}</div>
        <div class="col-md-6"><strong>CIN:</strong> {{ commande.client.cin }}</div>
        <div class="col-md-12"><strong>Address:</strong> {{ commande.client.rue }}, {{ commande.client.ville }} {{ commande.client.codePostal }}</div>
      </div>
    </div>
  
    <!-- 📦 Products -->
    <div class="section-card mb-4">
      <h5 class="fw-semibold mb-3"><i class="fas fa-box me-2 text-secondary"></i>Products</h5>
      <table class="table table-sm table-hover">
        <thead class="table-light">
          <tr>
            <th>Product</th>
            <th>Price</th>
            <th>Qty</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let p of commande.lignes">
            <td>{{ p.libelleProduit }}</td>
            <td>{{ p.prix }} DT</td>
            <td>{{ p.quantite }}</td>
            <td>{{ p.prix * p.quantite | number:'1.2-2' }} DT</td>
          </tr>
        </tbody>
      </table>
    </div>
  
    <!-- 📊 Summary -->
    <div class="section-card mb-4">
      <h5 class="fw-semibold mb-3"><i class="fas fa-chart-pie me-2 text-secondary"></i>Summary</h5>
      <ul class="list-unstyled mb-0">
        <li><strong>Sous-total:</strong> {{ commande.sousTotal }} DT</li>
        <li><strong>TVA (17%):</strong> {{ commande.tva | number:'1.2-2' }} DT</li>
        <li><strong>Total:</strong> <span class="text-danger">{{ commande.total | number:'1.2-2' }} DT</span></li>
      </ul>
    </div>
  <!-- 🚚 Livraison -->
<div class="section-card mb-4" *ngIf="livraison">
  <h5 class="fw-semibold mb-3">
    <i class="fas fa-shipping-fast me-2 text-secondary"></i> Delivery Info
  </h5>
  <ul class="list-unstyled mb-0">
    <li><strong>Status:</strong> <span class="badge bg-info">{{ livraison.statusLivraison }}</span></li>
    <li><strong>Tracking Number:</strong> {{ livraison.numTracking || 'Non disponible' }}</li>
    <li><strong>Date:</strong> {{ livraison.dateLivraison | date: 'short' }}</li>
    <li *ngIf="livraison.shippingLabel">
      <strong>Shipping Label:</strong>
      <a [href]="livraison.shippingLabel" target="_blank" class="btn btn-outline-secondary btn-sm ms-2">
        <i class="fas fa-print me-1"></i> Imprimer
      </a>
    </li>
  </ul>
</div>

    
  </div>
  