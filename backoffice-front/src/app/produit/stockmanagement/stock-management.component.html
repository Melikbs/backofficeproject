<div class="stock-management-container">
  <!-- Header -->
  <div class="header">
    <h2><i class="fas fa-boxes"></i> Gestion des Stocks - <span>{{ produit?.libelle }}</span></h2>
    <button class="btn-add-stock" (click)="openAddStockSwal()">
      <i class="fas fa-plus"></i> Ajouter un stock
    </button>
  </div>

  <!-- Add Stock Form -->
  <div *ngIf="showAddForm" class="stock-form">
    <form (ngSubmit)="addStock()">
      <div class="form-group">
        <label for="color"><i class="fas fa-palette"></i> Couleur</label>
        <select id="color" class="form-control" [(ngModel)]="newStock.codeCouleur" name="color" required>
          <option *ngFor="let couleur of couleurs" [value]="couleur.codeCouleur">{{ couleur.libelle }}</option>
        </select>
      </div>

      <div class="form-group">
        <label for="quantity"><i class="fas fa-sort-numeric-up-alt"></i> Quantité</label>
        <input type="number" id="quantity" class="form-control" [(ngModel)]="newStock.nombreStock" name="quantity" required min="1" />
      </div>

      <div class="button-group">
        <button type="submit" class="btn-submit">
          <i class="fas fa-check"></i> Ajouter
        </button>
        <button type="button" class="btn-cancel" (click)="cancelAddStock()">
          <i class="fas fa-times"></i> Annuler
        </button>
      </div>
    </form>
  </div>

  <!-- Stocks Table -->
  <div class="stock-table-container">
    <table class="stock-table">
      <thead>
        <tr>
          <th>Couleur</th>
          <th>Quantité</th>
          <th>Statut</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let stock of stocks">
          <td>{{ getCouleurLibelle(stock.codeCouleur) }}</td>
          <td>
            <input
              type="number"
              [(ngModel)]="stock.nombreStock"
              (change)="updateNombreStock(stock, $event)"
              min="0"
              class="input-quantity"
            />
          </td>
          <td>
            <span class="badge-status" [class.in-stock]="stock.inStock" [class.out-of-stock]="!stock.inStock">
              <i [class]="stock.inStock ? 'fas fa-check-circle' : 'fas fa-exclamation-triangle'"></i>
              {{ stock.inStock ? 'En stock' : 'Rupture' }}
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
